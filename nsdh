from flask import Flask, request, jsonify

app = Flask(__name__)

# Initialize a variable to hold the player count
player_count = 0

refill_value = "false"

@app.route('/endpoint', methods=['POST'])
def endpoint():
    global player_count  # Use the global variable
    data = request.get_json()
    player_count = data.get('playerCount', 0)  # Default to 0 if not provided
    message = data.get('message')

    # Here you can do whatever you need with the data
    print(f"Received POST request: {message} with player count: {player_count}")

    # Respond back if needed
    return jsonify({"status": "success", "playerCount": player_count}), 200

@app.route('/endpoint2', methods=['POST'])
def endpoint2():
    global refill_value  # Use the global variable
    data = request.get_json()
    refill_value = data.get('refill', 'false')  # Default to 0 if not provided

    # Here you can do whatever you need with the data
    print(f"Received POST request: refill with refill value: {refill_value}")

    # Respond back if needed
    return jsonify({"status": "success", "refill": refill_value}), 200

@app.route('/player_count', methods=['GET'])
def get_player_count():
    return jsonify({"playerCount": player_count}), 200

@app.route('/refill_value', methods=['GET'])
def get_refill_value():
    return jsonify({"refill": refill_value}), 200

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
